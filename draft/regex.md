

# 正则表达式





## 简介

正则表达式是一种用于匹配字符串中字符组合的模式。它使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在许多编程语言和文本编辑器中，正则表达式被广泛用于搜索、替换、分割字符串等操作。



## 基本标识

正则表达式中的标识用于改变表达式的解析方式，它们通常位于表达式末尾的斜杠之后。以下是一些常用的标识及其作用：

| 标识             | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| dotall (`s`)     | 点（`.`）会匹配任何字符，包括换行符                          |
| 粘连 (`y`)       | 只会从 `lastIndex` 位置开始匹配，且如果设置了全局标识 (`g`) 的话会被忽略 |
| 多行 (`m`)       | 当启用 multiline 标识时，使用起始和结尾锚（`^` 和 `$`）会匹配到行首和行尾，而不是整个字符串的头部和尾部 |
| 全局搜索 (`g`)   | 保留上次匹配结果的位置，允许子序列从上次匹配的结果继续搜索。<br />如果没有全局 (`g`) 标识，后面的查询会返回相同的结果 |
| 忽略大小写 (`i`) | 让整个表达式对大小写不敏感                                   |



## 特殊字符与功能

### 转义字符

在正则表达式中，某些字符具有特殊含义，如果需要匹配这些字符本身，需要使用转义字符 `\`。以下是一些常用的转义字符及其作用：

| 转义字符 | 描述         |
| -------- | ------------ |
| `\.`     | 匹配点字符   |
| `\$`     | 匹配美元符号 |
| `\^`     | 匹配脱字符   |
| `\*`     | 匹配星号     |
| `\+`     | 匹配加号     |
| `\?`     | 匹配问号     |
| `\(`     | 匹配左括号   |
| `\)`     | 匹配右括号   |
| `\[`     | 匹配左方括号 |
| `\]`     | 匹配右方括号 |
| `\\`     | 匹配反斜杠   |

### 替换与断言

| 功能                      | 描述                                                       |
| ------------------------- | ---------------------------------------------------------- |
| 负向后行断言 (`?<!ABC>`)  | 指定在主表达式之前无法匹配的组（如果匹配，则结果将被丢弃） |
| 正向后行断言 (`(?<=ABC)`) | 匹配主表达式之前的组，而不将其包含在结果中                 |
| 负向先行断言 (`(?!ABC)`)  | 指定主表达式后无法匹配的组（如果匹配，则结果将被丢弃）     |
| 正向先行断言 (`(?=ABC)`)  | 匹配主表达式后面的组而不将其包含在结果中                   |

### 分组与引用

| 功能                          | 描述                                                       |
| ----------------------------- | ---------------------------------------------------------- |
| 非捕获分组 (`(?:ABC)`)        | 在不创建捕获分组的情况下，把数个标记组在一起               |
| 数字引用                      | 匹配捕获分组的结果，如 `(\d) \1` 表示引用第一个分组        |
| 命名捕获分组 (`(?<name>)ABC`) | 创建一个可以通过指定名称引用的捕获分组                     |
| 捕获分组 (`(ABC)`)            | 把多个标记分在同一组并创建一个捕获分组，用来创建子串或引用 |

### 量词与多选

| 量词    | 描述                               |               |      |                             |
| ------- | ---------------------------------- | ------------- | ---- | --------------------------- |
| `*`     | 匹配 0 个或无数个                  |               |      |                             |
| `+`     | 匹配 1 个或无数个                  |               |      |                             |
| `{n,m}` | 匹配 n 到 m 个                     |               |      |                             |
| `?`     | 令前面标记慵懒，尽可能少的匹配字符 |               |      |                             |
| `       | `                                  | 多选，如 `b(a | e    | i)d`匹配`bad`、`bed`、`bid` |

### 锚定

| 锚定 | 描述                             |
| ---- | -------------------------------- |
| `\b` | 词边界，仅匹配有词边界的字符     |
| `\B` | 非词边界，仅匹配没有词边界的字符 |
| `^`  | 匹配开头                         |
| `$`  | 匹配结尾                         |

### 字符类

| 字符类   | 描述                             |
| -------- | -------------------------------- |
| `\d`     | 匹配任意数字字符                 |
| `\D`     | 匹配除数字外的任意字符           |
| `\s`     | 匹配空白字符                     |
| `\S`     | 匹配除空白外的字符               |
| `\w`     | 匹配字母，数字和下划线字符       |
| `\W`     | 匹配除字母，数字和下划线外的字符 |
| `[ABC]`  | 匹配集合中任何字符               |
| `[^ABC]` | 匹配除集合中任何字符             |



## 正则表达式的实际应用场景

### 数据验证

正则表达式可以用于验证用户输入的数据是否符合特定格式。例如，验证电子邮件地址、电话号码、邮政编码等。

**示例：验证电子邮件地址**

| 正则表达式                                         | 描述                 |
| -------------------------------------------------- | -------------------- |
| `^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$` | 验证电子邮件地址格式 |

### 文本提取

从大量文本中提取所需信息是正则表达式的一大优势。例如，从日志文件中提取错误信息、从网页源代码中提取链接等。

**示例：提取网页中的链接**

| 正则表达式                    | 描述             |
| ----------------------------- | ---------------- |
| `<a\s+href=["'](.*?)["'].*?>` | 提取网页中的链接 |

### 文本替换

使用正则表达式可以方便地进行文本替换操作，如替换特定的单词、格式化文本等。

**示例：将文本中的 "Mr." 替换为 "Mister"**

| 正则表达式  | 替换为      |
| ----------- | ----------- |
| `Mr\.(\w+)` | `Mister $1` |

### 文本分割

正则表达式可以用于根据特定的分隔符分割文本，如逗号、空格、换行符等。

**示例：按逗号分割文本**

| 正则表达式 | 描述           |
| ---------- | -------------- |
| `,`        | 按逗号分割文本 |

### 代码重构

在代码重构过程中，正则表达式可以帮助快速查找和替换特定的代码模式，提高开发效率。

**示例：将函数调用中的 `console.log` 替换为 `debugger`**

| 正则表达式              | 替换为      |
| ----------------------- | ----------- |
| `console\.log\((.*?)\)` | `debugger;` |