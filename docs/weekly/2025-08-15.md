---
title: 《诗与周刊》 No.02
date: 2025-08-15
description: "从博客《为自由献诗》延伸的技术碎思 | 代码·分享·娱乐 | 创刊号"
poem: 闲情长轴墨，山木映镜湖
---

# 杏坛广场<Badge type="tip" text="" />





## 胡言乱语

**再修理自行车**

这周自行车前胎爆了，骑了一周共享单车。趁着周末有时间赶紧换了车胎，跨越十几年的换车胎体验。好像从初中以后就告别自行车了，还记得小时候无聊，改装了一个自行车，凑了凑配件，竟真的成功了。能跑，速度不快，在公路上来回驰骋，那时候是真的快乐。十几年后的今天再修理自行车，有一种熟悉又陌生的感觉。我看着车，呆呆的，心想：貌似比小时候的自行车要小。



## 值得分享

- [Bun](https://bun.sh/)

  **Bun** 是一个现代的 JavaScript/TypeScript 运行时，旨在替代 Node.js，使用 **Zig 语言**编写，专注于开发效率和运行速度。

  

- [Deno](https://deno.com/)

  **Deno** 是一个现代的 JavaScript/TypeScript 运行时，用 **Rust 语言**编写，原生支持 TypeScript、ES 模块和现代 Web API

  

- pnpm

  **pnpm**（**Performant npm**）是一个高性能的 **Node.js 包管理器**，作为 `npm` 和 `yarn` 的现代替代品，主打 **速度快、磁盘节省、严格依赖管理**。
  
  

## 编程手札

**Bun 简介**

> 一个现代的 JavaScript/TypeScript 运行时



核心特性

- 极速启动：比 Node.js 快 3~5 倍，冷启动几乎无延迟
- 内置工具链：自带 `bun install`（包管理）、`bun run`、`bun test`、`bun build`
- 原生支持 TS/JSX：无需额外配置，直接运行 `.ts`、`.tsx` 文件
- 内置测试运行器：类似 Jest，但更快，支持 `bun test`
- 内置 Web API：支持 `fetch`、`WebSocket`、`Headers` 等浏览器 API
- 内置 SQLite 支持：`Bun.sqlite` 可直接操作数据库
- 兼容 npm 生态：可安装和使用大多数 npm 包

现在我们使用 Bun 创建一个简单的 HTTP 服务器，试试吧。



:::steps

1. 创建项目目录：

   ```bash
   mkdir bun-hello-world
   cd bun-hello-world
   
   # 初始化 `package.json`（Bun 兼容 npm）
   bun init
   ```
   
   会提示你输入项目名称、描述等，也可以一路回车使用默认值。
   
   
   
   项目结构如下：
   
   ```
   bun-hello-world/
   ├── index.ts
   ├── test.test.ts
   ├── package.json
   ├── bunfig.json (可选)
   └── node_modules/ (bun 会软链或使用全局缓存)
   ```
   
   
   
2. 编写服务器代码

   创建 `index.ts` 文件：
   
   ```ts
   // index.ts
   import { serve } from "bun";
   
   serve({
     port: 3000,
     fetch(req) {
       const url = new URL(req.url);
       
       if (url.pathname === "/") {
         return new Response("Hello from Bun! 🚀", {
           headers: { "Content-Type": "text/plain" },
         });
       }
   
       if (url.pathname === "/api/time") {
         return new Response(JSON.stringify({ time: new Date().toISOString() }), {
           headers: { "Content-Type": "application/json" },
         });
       }
   
       return new Response("Not Found", { status: 404 });
     },
   });
   
   console.log("Server is running on http://localhost:3000");
   ```
   
   
   
3. 运行项目

   直接运行：
   
   ```bash
   bun index.ts
   ```
   
   打开浏览器访问：
   
   - `http://localhost:3000` → 显示 "Hello from Bun! 🚀"
   - `http://localhost:3000/api/time` → 返回当前时间的 JSON
   
   
   
4. 启用热重载（开发模式）

   Bun 本身不内置热重载，但我们可以使用 `bun --watch` 实现文件变化自动重启
   
   ```bash
   bun --watch index.ts
   ```
   
   现在你修改 `index.ts`，Bun 会自动重启服务器！
   
   
   
5. 安装第三方包（体验 Bun 的包管理）

   试试安装 `nanoid`（生成唯一 ID）：
   
   ```bash
   bun add nanoid
   ```
   
   修改 `index.ts`，添加一个新路由：
   
   ```ts
   import { nanoid } from "nanoid";
   
   // 在 fetch 内添加：
   if (url.pathname === "/api/id") {
     return new Response(JSON.stringify({ id: nanoid() }), {
       headers: { "Content-Type": "application/json" },
     });
   }
   ```
   
   重启服务后访问 `/api/id`，会返回一个随机 ID。
   
   
   
6. 写一个简单的测试

   创建 `test.test.ts`：
   
   ```ts
   // test.test.ts
   import { expect, test } from "bun:test";
   
   test("hello world", () => {
     expect("hello").toBe("hello");
   });
   
   test("2 + 2 = 4", () => {
     expect(2 + 2).toBe(4);
   });
   ```
   
   运行测试：
   
   ```bash
   bun test
   ```





7. 添加 `.bunfig.json`（配置文件）

   虽然不是必须的，但可以创建 `bunfig.json` 来配置 Bun：
   
   ```json
   {
     "watch": {
       "ignore": ["node_modules", "README.md"]
     }
   }
   ```
   
   
   
8. 总结

:::

## 清闲半日

- 生活：吐槽

  > 
  
  


- 电视剧：《重启人生 ブラッシュアップライフ》

  > 很好看，十分推荐，虽然剧情上有点小瑕疵，但是瑕不掩瑜。对于人生有很多启发。很有意义的一部剧。尤其是当女主真正的过好这辈子而不是考虑下辈子，他才真正把人生参透一撇。
  >
  > 每一次选择都会有不同的人生，祝愿我们每次都有正确的选择

  

- 音乐：《 慢慢喜欢你》——李荣浩

  > 怎么说呢，有种初恋的味道，又酸又甜。如果我有女朋友，我一定唱给她听。
