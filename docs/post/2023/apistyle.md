---
title: å…³äº| APIè®¾è®¡é£æ ¼
date: 2023-6-5
categories: 
  - çŸ¥è¯†ç§‘æ™®
tags: 
  - è®¾è®¡é£æ ¼
order: 6
---



::: warning

ä¿®æ”¹ä¸­Â·Â·Â·

:::

<div v-if="0">



# API è®¾è®¡é£æ ¼

::: tip å‰è¨€

å—ï¼Œå†™JavaWebé¡¹ç›®çš„çœ‹è§äº†ï¼Œå°±äº†è§£äº†è§£ã€‚ä½ ä¿¡æˆ‘å§ï¼ŸğŸ˜‰

:::



## ç®€ä»‹

> åœ¨å†™JavaWebé¡¹ç›®çš„APIæ¥å£ï¼Œæˆ‘ä»¬å¯èƒ½è§è¿‡RESTfulé£æ ¼ã€‚å…¶å®å°±æ˜¯ä¸€ç§APIçš„çº¦å®šè§„èŒƒï¼Œä½ ä¸éµå®ˆä¹Ÿæ²¡å…³ç³»ğŸ˜¶ã€‚

APIé£æ ¼æ˜¯æŒ‡åœ¨è®¾è®¡å’Œå®ç°APIæ—¶æ‰€é‡‡ç”¨çš„æ¶æ„å’Œè§„èŒƒï¼Œç”¨äºå®šä¹‰APIçš„ç»“æ„ã€äº¤äº’æ–¹å¼å’Œé€šä¿¡åè®®ã€‚ä¸åŒçš„APIé£æ ¼å…·æœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ã€‚



## API é£æ ¼ç±»å‹

APIï¼ˆApplication Programming Interfaceï¼‰é£æ ¼ç±»å‹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§

- `RESTï¼ˆRepresentational State Transferï¼‰`é£æ ¼ï¼š`REST`æ˜¯ä¸€ç§åŸºäºHTTPåè®®çš„è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå¼ºè°ƒä½¿ç”¨ç»Ÿä¸€çš„æ¥å£è¿›è¡Œèµ„æºçš„è®¿é—®å’Œæ“ä½œ`RESTful API`ä½¿ç”¨HTTPåŠ¨è¯ï¼ˆå¦‚GETã€POSTã€PUTã€DELETEï¼‰å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼Œå¹¶ä½¿ç”¨URLæ¥æ ‡è¯†èµ„æºã€‚

- `RPCï¼ˆRemote Procedure Callï¼‰`é£æ ¼ï¼š`RPC`æ˜¯ä¸€ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„é€šä¿¡åè®®ï¼Œç”¨äºå®ç°ä¸åŒè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡å’Œæ•°æ®ä¼ è¾“ã€‚RPCé£æ ¼çš„APIå…è®¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè°ƒç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–¹æ³•ï¼Œå¹¶è·å–è¿”å›ç»“æœã€‚

- `GraphQLï¼ˆGraph Query Languageï¼‰`é£æ ¼ï¼š`GraphQL`æ˜¯ä¸€ç§ç”¨äºAPIæŸ¥è¯¢å’Œæ“ä½œçš„æŸ¥è¯¢è¯­è¨€å’Œè¿è¡Œæ—¶ç¯å¢ƒã€‚å®ƒæä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥è·å–å®¢æˆ·ç«¯éœ€è¦çš„æ•°æ®ï¼Œå¹¶å‡å°‘äº†ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡ã€‚

- `SOAPï¼ˆSimple Object Access Protocolï¼‰`é£æ ¼ï¼š`SOAP`æ˜¯ä¸€ç§åŸºäºXMLçš„é€šä¿¡åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œä¸Šè¿›è¡Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„è§„èŒƒå’Œæ ‡å‡†ï¼Œç”¨äºæè¿°æ¶ˆæ¯çš„ç»“æ„å’Œäº¤äº’æ–¹å¼ã€‚

- `gRPCï¼ˆGoogle Remote Procedure Callï¼‰`é£æ ¼ï¼š`gRPC`æ˜¯ä¸€ç§é«˜æ€§èƒ½ã€é€šç”¨çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ¡†æ¶ï¼Œä½¿ç”¨`Protocol Buffers`ä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ï¼Œå¹¶æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚åŒå‘æµå¼ä¼ è¾“å’Œèº«ä»½éªŒè¯ã€‚



### API é£æ ¼ç±»å‹åˆ†ç±»

> å…¶å®èƒ½æ¥è§¦çš„å°±å‡ ç§ï¼Œäº†è§£å°±è¡ŒğŸ˜¶

| Web API          | æŸ¥è¯¢ API  | å‘å¸ƒè®¢é˜… API | RPC API |
| ---------------- | --------- | ------------ | ------- |
| `REST`           | `GraphQL` | `Kafka`      | `SOAP`  |
| `so-called REST` |           | `WebSub`     | `gRPC`  |
|                  |           |              | `tRPC`  |



## å¸¸è§ API é£æ ¼

> äº†è§£ä¸ºä¸»ï¼Œéƒ½ä¸å¤ªå¥½æ‡‚ï¼Œé‡åˆ°ä½ å°±çŸ¥é“äº†ğŸ˜‰

### REST

RESTï¼ˆRepresentational State Transferï¼‰æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œç”¨äºæ„å»ºç½‘ç»œåº”ç”¨ç¨‹åºã€‚å®ƒæ˜¯åŸºäºHTTPåè®®çš„ä¸€ç»„å‡†åˆ™å’Œçº¦æŸï¼Œæ—¨åœ¨å®ç°ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§ã€å¯é æ€§ã€å¯æ‰©å±•æ€§å’Œç®€å•æ€§ã€‚

é€‚ç”¨ï¼šREST éå¸¸é€‚åˆæ„å»ºæŒä¹…çš„å¯æ‰©å±•ç³»ç»Ÿã€‚å®ƒä¹Ÿæ˜¯ä¸€ç§ç›¸å¯¹çµæ´»å’Œæˆç†Ÿçš„é£æ ¼ï¼Œå› æ­¤é€‚ç”¨äºå†…å®¹åå•†ã€å¤šåª’ä½“å’Œé¡¶çº§èº«ä»½éªŒè¯ç­‰å†…å®¹ã€‚



### GraphQL

GraphQLæ˜¯ä¸€ç§çµæ´»ã€é«˜æ•ˆçš„æŸ¥è¯¢è¯­è¨€å’Œè¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºæ„å»ºAPIï¼Œä»¥æ»¡è¶³å®¢æˆ·ç«¯ç²¾ç¡®çš„æ•°æ®éœ€æ±‚ã€‚

é€‚ç”¨ï¼šGraphQLé€‚ç”¨äºéœ€è¦çµæ´»ã€é«˜æ•ˆã€ç²¾ç¡®æ•°æ®æŸ¥è¯¢çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å‰åç«¯åˆ†ç¦»ã€å¤šç«¯åº”ç”¨å’Œå¤æ‚æ•°æ®éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒå’Œæ•°æ®äº¤äº’æ•ˆç‡ã€‚



### Apache Kafka

Apache Kafkaæ˜¯ä¸€ä¸ªé«˜ååé‡ã€å¯æŒä¹…åŒ–ã€åˆ†å¸ƒå¼æµæ•°æ®å¹³å°ï¼Œç”¨äºå¤„ç†å®æ—¶æ•°æ®æµï¼Œå®ç°é«˜æ•ˆçš„æ•°æ®ä¼ è¾“å’Œæ¶ˆæ¯å¤„ç†ã€‚

é€‚ç”¨ï¼šApache Kafkaé€‚ç”¨äºéœ€è¦å¤„ç†å¤§è§„æ¨¡å®æ—¶æ•°æ®æµã€æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿã€å®ç°æ•°æ®ç®¡é“å’ŒETLæµç¨‹ã€æ„å»ºæµå¼å¤„ç†å’Œäº‹ä»¶é©±åŠ¨æ¶æ„ä»¥åŠæ—¥å¿—èšåˆå’Œç›‘æ§ç­‰åœºæ™¯ã€‚å…¶é«˜æ€§èƒ½ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§ä½¿å…¶æˆä¸ºå¤„ç†å®æ—¶æ•°æ®å’Œæ„å»ºå¯é çš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ã€‚



### gRPC

gRPCæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶ï¼Œç”¨äºæ„å»ºè·¨è¯­è¨€å’Œè·¨å¹³å°çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œé€šä¿¡åè®®ã€‚

é€‚ç”¨ï¼šgRPCé€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½ã€è·¨è¯­è¨€ã€è·¨å¹³å°çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä»¥åŠéœ€è¦åŒå‘æµå’Œæµå¼å¤„ç†çš„åº”ç”¨ç¨‹åºä¸­ï¼ŒgRPCèƒ½å¤Ÿæä¾›é«˜æ•ˆã€å¯é çš„é€šä¿¡æœºåˆ¶ã€‚



### **ä¸€ã€åŸºäºèµ„æºçš„é£æ ¼**

1. **RESTï¼ˆRepresentational State Transferï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šé€šè¿‡ HTTP æ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰æ“ä½œèµ„æºï¼ŒURL æ ‡è¯†èµ„æºè·¯å¾„ã€‚
   - **ç‰¹ç‚¹**ï¼šæ— çŠ¶æ€ã€å¯ç¼“å­˜ã€åˆ†å±‚ç³»ç»Ÿã€‚
   - **é€‚ç”¨åœºæ™¯**ï¼šå‰åç«¯åˆ†ç¦»ã€æ ‡å‡†åŒ–æ¥å£è®¾è®¡ã€‚
2. **REST-like API**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šå€Ÿé‰´ REST ç†å¿µï¼Œä½†æœªå®Œå…¨éµå¾ªå…¶çº¦æŸï¼ˆå¦‚ HATEOASï¼‰ã€‚
   - **ç‰¹ç‚¹**ï¼šçµæ´»æ€§é«˜ï¼Œå¸¸è§äºå®é™…å¼€å‘ä¸­ã€‚
3. **ODataï¼ˆOpen Data Protocolï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šåŸºäº REST çš„æ‰©å±•åè®®ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆå¦‚ç­›é€‰ã€æ’åºã€åˆ†é¡µï¼‰ã€‚
   - **ç‰¹ç‚¹**ï¼šæ ‡å‡†åŒ–æŸ¥è¯¢è¯­æ³•ï¼ˆ`$filter`, `$orderby`ï¼‰ã€‚
   - **é€‚ç”¨åœºæ™¯**ï¼šä¼ä¸šçº§æ•°æ®æœåŠ¡ã€‚

------

### **äºŒã€åŸºäºè¿œç¨‹è°ƒç”¨çš„é£æ ¼**

1. **RPCï¼ˆRemote Procedure Callï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šå®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨æœåŠ¡ç«¯å‡½æ•°ï¼Œç±»ä¼¼æœ¬åœ°æ–¹æ³•è°ƒç”¨ã€‚
   - **ç‰¹ç‚¹**ï¼šå‡½æ•°å¼äº¤äº’ï¼Œåè®®æ— å…³ï¼ˆå¦‚ HTTPã€TCPï¼‰ã€‚
   - **å­ç±»**ï¼š
     - **gRPC**ï¼šåŸºäº HTTP/2 å’Œ Protocol Buffersï¼Œæ”¯æŒæµå¼é€šä¿¡ã€‚
     - **JSON-RPC/XML-RPC**ï¼šåŸºäº JSON æˆ– XML çš„è½»é‡çº§ RPCã€‚
2. **SOAPï¼ˆSimple Object Access Protocolï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šåŸºäº XML çš„ä¸¥æ ¼åè®®ï¼Œå®šä¹‰å®Œæ•´çš„æ¶ˆæ¯æ ¼å¼å’Œå®‰å…¨æ ‡å‡†ã€‚
   - **ç‰¹ç‚¹**ï¼šWS-* æ ‡å‡†ï¼ˆå¦‚ WS-Securityï¼‰ï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨ã€‚

------

### **ä¸‰ã€åŸºäºæŸ¥è¯¢çš„çµæ´»é£æ ¼**

1. **GraphQL**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šå®¢æˆ·ç«¯è‡ªå®šä¹‰æŸ¥è¯¢å­—æ®µï¼Œç²¾å‡†è·å–æ‰€éœ€æ•°æ®ã€‚
   - **ç‰¹ç‚¹**ï¼šå•ç«¯ç‚¹ã€å‡å°‘ç½‘ç»œè¯·æ±‚ã€å¼ºç±»å‹ Schemaã€‚
   - **é€‚ç”¨åœºæ™¯**ï¼šå¤šç»ˆç«¯é€‚é…ã€å¤æ‚æ•°æ®å…³è”æŸ¥è¯¢ã€‚
2. **Falcor**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šç”± Netflix æå‡ºï¼Œé€šè¿‡è™šæ‹Ÿ JSON æ¨¡å‹ç®€åŒ–æ•°æ®è·å–ã€‚
   - **ç‰¹ç‚¹**ï¼šè·¯å¾„æŸ¥è¯¢è¯­æ³•ï¼Œä¸ GraphQL ç±»ä¼¼ä½†æ›´è½»é‡ã€‚

------

### **å››ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„é£æ ¼**

1. **å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPub/Subï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šé€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶å®ç°å¼‚æ­¥é€šä¿¡ï¼Œç”Ÿäº§è€…å‘å¸ƒäº‹ä»¶ï¼Œæ¶ˆè´¹è€…è®¢é˜…äº‹ä»¶ã€‚
   - **ä»£è¡¨æŠ€æœ¯**ï¼š
     - **Apache Kafka**ï¼šé«˜ååé‡åˆ†å¸ƒå¼æ¶ˆæ¯æµå¹³å°ã€‚
     - **WebSub**ï¼šåŸºäº Web çš„æ ‡å‡†åŒ–å‘å¸ƒè®¢é˜…åè®®ã€‚
2. **Webhook**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šåå‘ APIï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€äº‹ä»¶é€šçŸ¥ã€‚
   - **ç‰¹ç‚¹**ï¼šåŸºäº HTTP å›è°ƒï¼Œå¸¸ç”¨äºæ”¯ä»˜å›è°ƒã€CI/CD é€šçŸ¥ã€‚

------

### **äº”ã€å®æ—¶é€šä¿¡é£æ ¼**

1. **WebSocket**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šå…¨åŒå·¥é€šä¿¡åè®®ï¼Œæ”¯æŒæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å®æ—¶äº¤äº’ã€‚
   - **ç‰¹ç‚¹**ï¼šé•¿è¿æ¥ã€ä½å»¶è¿Ÿï¼Œé€‚åˆèŠå¤©ã€å®æ—¶åä½œåœºæ™¯ã€‚
2. **Server-Sent Events (SSE)**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šæœåŠ¡ç«¯å•å‘æ¨é€æ•°æ®æµè‡³å®¢æˆ·ç«¯ã€‚
   - **ç‰¹ç‚¹**ï¼šåŸºäº HTTPï¼Œç®€å•æ˜“ç”¨ã€‚

------

### **å…­ã€å…¶ä»–é£æ ¼**

1. **tRPC**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šç±»å‹å®‰å…¨çš„ RPC æ¡†æ¶ï¼Œä¸“ä¸º TypeScript è®¾è®¡ã€‚
   - **ç‰¹ç‚¹**ï¼šæ—  Schema å®šä¹‰ï¼Œä¾èµ– TypeScript ç±»å‹æ¨æ–­ã€‚
2. **HATEOASï¼ˆHypermedia APIï¼‰**
   - **æ ¸å¿ƒæ€æƒ³**ï¼šAPI å“åº”ä¸­åµŒå…¥èµ„æºé“¾æ¥ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¶…åª’ä½“åŠ¨æ€å¯¼èˆªã€‚
   - **ç‰¹ç‚¹**ï¼šä¸¥æ ¼éµå¾ª REST çº¦æŸï¼Œä½†å®é™…åº”ç”¨è¾ƒå°‘ã€‚





## å†™åœ¨æœ€å

æœ€å¸¸è§çš„è¿˜æ˜¯ RESTfulé£æ ¼ï¼Œå°¤å…¶åœ¨å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œæ‰€ä»¥ä¸‹æ¬¡æœ‰æœºä¼šè¯¦ç»†è®²è®²ã€‚

> åˆæŒ–å‘äº†ğŸ§



## å‚è€ƒä¸‰ä¸‰

- https://juejin.cn/post/6971434012015493128#heading-1



</div>